# 字符、字符数组与字符串

## 字符变量


### 定义
之前介绍的int、float、long、double等变量类型都是用来存放数据的。而计算机要处理的信息远不止数据，大量的自然语言，都是以字母甚至汉字等符号的形式来表达信息的。

C++使用字符型变量**Char**来存储字符。

```cpp
char a;//顶一个一个字符型变量，名称为a
```

字符型变量占一个字节(Byte)，即8位(bit)。

### 赋值

字符变量可以赋值为一个字符或一个数字。当赋值为一个数字时，该数字表示一个字符的ASCII码。

```cpp
char a,b;
a='!';//注意在C++中，单个的字符使用单引号括起来。
b=66;
c=0x43;

```

**ASCII可显示字符**


|二进制|十进制|十六进制|图形|
|----|----|--|--|----|
|0010 0001|33|21|!|
|0010 0010|34|22|"|
|0010 0011|35|23|#|
|0010 0100|36|24|$|
|0010 0101|37|25| %|
|0010 0110|38|26|&|
|0010 0111|39|27|'|
|0010 1000|40|28|(|
|0010 1001|41|29|)|
|0010 1010|42|2A|*|
|0010 1011|43|2B|+|
|0010 1100|44|2C|,|
|0010 0000|32|20|（空格）(␠)|
|0010 1101|45|2D|-|
|0010 1110|46|2E|.|
|0010 1111|47|2F|/|
|0011 0000|48|30|0|
|0011 0001|49|31|1|
|0011 0010|50|32|2|
|0011 0011|51|33|3|
|0011 0100|52|34|4|
|0011 0101|53|35|5|
|0011 0110|54|36|6|
|0011 0111|55|37|7|
|0011 1000|56|38|8|
|0011 1001|57|39|9|
|0011 1010|58|3A|:|
|0011 1011|59|3B|;|
|0011 1100|60|3C|<|
|0011 1101|61|3D|=|
|0011 1110|62|3E|>|
|0011 1111|63|3F|?|
|0100 0000|64|40|@|
|0100 0001|65|41|A|
|0100 0010|66|42|B|
|0100 0011|67|43|C|
|0100 0100|68|44|D|
|0100 0101|69|45|E|
|0100 0110|70|46|F|
|0100 0111|71|47|G|
|0100 1000|72|48|H|
|0100 1001|73|49|I|
|0100 1010|74|4A|J|
|0100 1011|75|4B|K|
|0100 1100|76|4C|L|
|0100 1101|77|4D|M|
|0100 1110|78|4E|N|
|0100 1111|79|4F|O|
|0101 0000|80|50|P|
|0101 0001|81|51|Q|
|0101 0010|82|52|R|
|0101 0011|83|53|S|
|0101 0100|84|54|T|
|0101 0101|85|55|U|
|0101 0110|86|56|V|
|0101 0111|87|57|W|
|0101 1000|88|58|X|
|0101 1001|89|59|Y|
|0101 1010|90|5A|Z|
|0101 1011|91|5B|[|
|0101 1100|92|5C|\|
|0101 1101|93|5D|]|
|0101 1110|94|5E|^|
|0101 1111|95|5F|_|
|0110 0000|96|60|`|
|0110 0001|97|61|a|
|0110 0010|98|62|b|
|0110 0011|99|63|c|
|0110 0100|100|64|d|
|0110 0101|101|65|e|
|0110 0110|102|66|f|
|0110 0111|103|67|g|
|0110 1000|104|68|h|
|0110 1001|105|69|i|
|0110 1010|106|6A|j|
|0110 1011|107|6B|k|
|0110 1100|108|6C|l|
|0110 1101|109|6D|m|
|0110 1110|110|6E|n|
|0110 1111|111|6F|o|
|0111 0000|112|70|p|
|0111 0001|113|71|q|
|0111 0010|114|72|r|
|0111 0011|115|73|s|
|0111 0100|116|74|t|
|0111 0101|117|75|u|
|0111 0110|118|76|v|
|0111 0111|119|77|w|
|0111 1000|120|78|x|
|0111 1001|121|79|y|
|0111 1010|122|7A|z|
|0111 1011|123|7B|{|
|0111 1100|124|7C|&#124;|
|0111 1101|125|7D|}|
|0111 1110|126|7E|~|


## 大小写转换
观察ascii表可以发现，A-Z和a-z是连续出现的，且A和a，B和b...都有着相等的间距：20h，或者说32。
因此
'A'+32='a'
可推出
32='a'-'A'


## 字符数组

### 定义

与其他数据类型一样，字符型变量也可以定义数组来保存多个字符。字符数组可以用来保存字符序列。
例如：
```cpp
char a[20];
```

### 赋值

字符数组可以采用与其他数组类似的方式赋值，例如

```cpp
char a[20]={'a','b','c','d','e'};//仅在定义时可用
a[5]='\0';//结束符
```
也可以用一种独有的方式：字符串进行赋值

```cpp
char a[20]="abcde";

char a[5]="abcde";
```
注意仅当第一段程序假如第二行时，前后两段程序才完全等价。C++通过'/0'来判断一段字符串结束，并依次计算字符串长度。因此，通过字符数组存储字符串时，**字符串最大长度为字符数组容量-1**。

字符串这种服务与自然语言表达的数据类型给我们带来了许多自然语言中的问题：大小写转换，单词查找，句子拼接等等。

**范例：计算字符串长度**

```cpp
char a[20]="abcd";
int i;
for(i=0;a[i]!='\0';i++);
cout<<i;
```
**范例：字符串拼接**
```cpp
char a[20]="abcd";
char b[20]="efgh";
int i,lena,lenb;
for(lena=0;a[lena]!='\0';lena++);
for(lenb=0;b[lenb]!='\0';lenb++);
for(i=0;i<lenb;i++)
{
    a[i+lena]=b[i];
}
cout<<a;
```

正因为对字符串的这些操作如此常见，且充分暴露了字符数组自身的局限性，C++的STL提供了String类来解决关于字符串的问题。

## 字符串类

在教学时，我们可以暂时略过类、结构体的概念，单纯的让学生们把String看作一种新的数据类型，一种可以用来存放字符串的数据类型。


string类的学习方法与其他stl库的知识一样，知识点很多，要求学生们不断积累，或者老师一条一条的带着孩子们熟悉，最终知道哪些操作可以通过STL完成，在做题时少做轮子。再次仅展示复制、连接、反转几个操作。


```cpp
#include <iostream>//输入输出头文件
#include <string>//字符串头文件
#include <algorithm>//算法头文件，包含了reverse
using namespace std;

int main()
{
    string str1,str2,str3;//str1，str2是string类型的变量
	str1="abcd";
	str2="efgh";
	cout<<str1+str2<<endl;//string类型的变量可以直接用+实现拼接
    str3=str1;//可以直接用=来复制string变量
    cout<<str3.size()<<endl;//注意这种新的语法形式
    reverse(str3.begin(), str3.end());//将str3反向
    cout<<str3;
}
```

除此之外，string变量也可以用类似数组的方式，来访问其中的某个字符。

**例：输入一个长度不超过 100 且不包括空格的字符串。要求将该字符串中的所有小写字母变成大写字母并输出。**

```cpp
#include<bits/stdc++.h>//万能头文件
using namespace std;
int main(){
	string s;cin>>s;
	for(int i=0;i<s.size();i++)s[i]=toupper(s[i]);
	cout<<s;
}
//toupper的原型，已经在stl中定义
int toupper(int c)  
{  
    if ((c >= 'a') && (c <= 'z'))  
        return c -('a'-'A');  
    return c;  
}
```
